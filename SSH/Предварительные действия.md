# Предварительная настройка SSH (key-only)

## 1. Сгенерировать ключ на клиенте
```bash
ssh-keygen -t ed25519 -a 100 -f ~/.ssh/id_ed25519
```

- `-t ed25519` — современный алгоритм
- `-a 100` — замедляет брутфорс (кол-во KDF-итераций)
- `-f` — путь до файла ключа
## 2. Закинуть ключ на сервер

```bash
ssh-copy-id -i ~/.ssh/id_ed25519.pub <USER>@<IP> -p <PORT>
```

или вручную:

```bash
cat ~/.ssh/id_ed25519.pub | ssh USER>@<IP> "mkdir -p ~/.ssh && chmod 700 ~/.ssh && cat >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys"
```

---
## 3. Скопировать конфиг на сервер

```bash
sudo cp sshd_config /etc/ssh/sshd_config
sudo cp 50-custom.conf /etc/ssh/sshd_config.d/
```

---
## 4. Проверить конфиг

```bash
sudo sshd -t
```

Ошибок быть не должно.

---
## 5. Перезапустить SSH

```bash
sudo systemctl restart ssh
```

---
## 6. Проверить подключение

```bash
ssh USER>@<IP> -p <PORT>
```
